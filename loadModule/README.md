# 加载模块

**本章提要：**

* 加载模块

* 创建模块

* 使用 node\_modules 文件夹

JavaScript 是世界上使用频率最高的编程语言之一，它是网络世界的通用语言，所有浏览器都使用它。JavaScript 的核心是在Netscape 公司大行其道的岁月里创建的， 而当时正处于浏览器战争的白热化时期， JavaScript 就是作为打击微软的利器而匆匆上马的。JavaScript 并没发展得十分成熟就被发布， 这意味着它不可避免地带有一些糟糕的特性。

虽然开发的时间不长， 但是 JavaScript 被赋予了一些强大的特性， 不过，“脚本间共享全局名称空间” 这一特性却不在其中。

一旦 JavaScript 代码被载入网页， 就会被添加进全局名称空间， 全局名称空间是被所有已载入的脚本所共享的通用地址空间， 这样就会导致安全性问题、冲突以及一些难以跟踪和解决的一般性错误。

值得庆幸的是， Node 为服务器端的 JavaScript 制定了一些规范， 并实现了 [CommonJS](http://javascript.ruanyifeng.com/nodejs/module.html) 模块标准。在这个标准中， 每个模块都拥有一个上下文， 将该模块和其他模块隔离开来，这意味着模块不会污染全局作用域—一因为根本就没有全局作用域并且也不会对其他模块造成干扰。

本章你将学习不同类型的模块， 以及如何将它们载入到你的应用程序中。

将代码拆分成一系列定义良好的模块可以帮助你有效地控制代码， 你还将学习如何创建和使用自定义模块。

## 理解 Node 如何加载模块

在 Node 中既可以用文件路径也可以用名称来引用模块，除非是核心模块（如http、fs等），否则用名称引用的模块最终都会被映射为一个文件路径。Node 核心模块将一些核心函数暴露给程序员，它们在 Node 进程启动时会被_预先载入_。

其他模块包括使用 NPM 安装的第三方模块， 以及你或你的同事创建的本地模块。

不管什么类型的模块，在被导入当前脚本之后，程序员都可以使用其对外暴露的一组公共 API。不管使用什么模块，你都可以使用`require` 函数，如下所示：

```js
var module = require ('module_ name') ;
```

上面的代码会导入一个核心模块或者由 NPM 安装的模块，`require` 函数会返回一个_对象_，该对象表示模块对外暴露的 JavaScript API。根据模块的不同，该对象可能是任意的 JavaScript 值——可以是一个函数，也可以是一个具有若干属性的对象，其属性可能是函数、数组或其他任何类型的JavaScript 对象。

## 导出模块

在 Node 中，[CommonJS](http://javascript.ruanyifeng.com/nodejs/module.html) 模块系统是文件之间共享对象或函数的唯一方式，对于足够复杂的应用程序，你应该将一些类、对象或者函数划分成定义良好的可重用模块，模块只对外暴露你指定的内容。

在 Node 中，**文件和模块是一一对应的**，这在下面的例子中将会看到。下面从创建文件 circle.js 开始，该文件只是导出了Circle 类的构造函数：

[import:"tag",option0:"value0"](./circle.js)

